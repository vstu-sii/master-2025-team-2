#Акторы системы:

1.Рентгенолог - основной пользователь. Врач-специалист, который: анализирует снимки с помощью AI, редактирует и подтверждает заключение. Работает с историей пациента.

2.Лечащий врач - врач, направляющий пациента на исследование, который: получает готовые заключения, может просматривать историю исследования, использует данные для постановки диагноза.

3.Администратор системы - технический специалист, который: настраивает параметры AI модели, управляет пользователями и правами доступа, проводит мониторинг работы системы.

4.LLM-сервис - внешняя AI система, которая: анализирует медицинские изображения и генерирует текстовое описание, обеспечивает медицинскую экспертизу.

5.Система PACS - медицинская система архивации, которая хранит историю рентгеновских снимков пациентов, предоставляет доступ к предыдущим исследованиям, интегрируется с медицинской информационной системой.

#Ключевые сценарии:

1.Сценарий “автоматически описать снимок”. Рентгенолог загружает рентгеновский снимок в систему. Система предварительно обрабатывает изображение. LLM-сервис анализирует снимок, выявляя патологии и аномалии. AI генерирует структурированное описание с указанием: качества снимка, выявленных патологий, локализации изменений и рекомендации для дообследования пациента. Описание сохраняется в системе как черновик. 

Ценность сценария: 

a)снижение ошибок рентгенолога, неизбежно случающихся при высокой загруженности, 

b)экономия времени пациента и обслуживающего персонала,

c)облегчение работы специалиста с рутинными занятиями.

2.Сценарий “редактировать AI-описание”. Рентгенолог просматривает сгенерированное описание. Корректирует терминологию и формулировки, добавляет профессиональные комментарии и наблюдения. Уточняет локализацию и характеристику находок. Сохраняет отредактированную версию как финальное заключение.

Ценность сценария:

a)снижение ошибок в финальном медицинском заключении,

b)дообучение искусственного интеллекта и работа над ошибками.

3.Сценарий “сравнить с предыдущими снимками пациента”. Система автоматически извлекает предыдущие снимки из PACS. LLM анализирует изменения между текущим и прошлыми рентгеновскими снимками. Генерируется сравнительный отчёт с указанием: прогрессирования патологии, появление новых находок, положительной динамики лечения. Рентгенолог использует отчёт для составления заключения.

Ценность сценария:

a)анализ динамики лечения пациента,

b)корректировка методики лечения.

4.Сценарий “Настроить и калибровать AI-модель”. Анализ текущей производительности системы. Калибровка медицинской терминологии. Оптимизация параметров AI модели. Управление обучающими данными. Тестирование и валидация.

Ценность сценария:

a)снижение ошибок AI-модели,

b)ускорение изучения снимка AI-моделью,

c)ускорение генерации ответа/заключения.

5.Сценарий “Интеграция снимков в цифровой архив пациента”. Идентификация пациента. Обработка сценариев поиска. Если есть история болезни пациента, то система добавляет снимок в существующий архив. Если пациент не имеет истории болезни, то создаётся новый цифровой архив.

Ценность сценария:

a)цифровизация  архива с карточками пациентов,

b)экономия времени, за счёт ускорения поиска истории болезни пациента.

6.Сценарий “Работа с заключением для постановки диагноза”. Лечащий врач получает доступ к заключениям пациента. Доктор проводит анализ AI-описания снимка и вывод рентгенолога. Проводит интеграцию с клинической картиной (сопоставляет жалобы пациента с остальными результатами исследования). Ставит диагноз пациенту. Планирует лечение.

Ценность сценария:

a)качественное лечения пациента и снижение ошибок,

b)экономия лечащего врача на постановку диагноза.

#Happy Path для основного сценария «Автоматическое описание рентгеновского снимка».

1.Рентгенолог загружает рентгеновский снимок

1.1. Рентгенолог авторизуется в системе под своим именем.

1.2. Рентгенолог переходит в раздел анализа снимков.

1.3. Рентгенолог нажимает на кнопку «Загрузить снимок».

1.4. Рентгенолог выбирает файл снимка пациента в разрешении Dicom, PNG, JPG.

1.5. Рентгенолог вводит текстовый запрос.

1.6. Рентгенолог нажимает кнопку «Анализировать снимок».

2.Система отправляет рентгеновский снимок и текстовый запрос в LLM-сервис для анализа.

3.LLM-сервис анализирует запрос

3.1. LLM-сервис выполняет компьютерный анализ анатомических структур.

3.2. LLM-сервис обнаруживает патологические признаки и аномалии.

3.3. LLM-сервис определяет локализацию и характеристики выявленных изменений.

3.4. LLM-сервис генерирует структурированное медицинское описание, включая: выявленные патологии, локализацию, изменения, оценку тяжести, рекомендации.

4.Система принимает и сохраняет AI-результат.

4.1. Система получает ответ от LLM-сервиса.

4.2. Система проверяет структуру ответа.

4.3. Система создаёт черновик заключения.

4.4. Система сохраняет полученный результат от LLM-сервиса в локальную базу данных.

5.Система отображает результат рентгенологу.

5.1. Рентгенологу открывается экран со снимком.

5.2. Система показывает сгенерированное AI-заключение на экране рентгенологу.

6.Рентгенолог подтверждает заключение LLM-сервиса.

6.1. Рентгенолог проверяет вывод AI.

6.2. Рентгенолог соглашается с исследованием системы.

6.3. Рентгенолог нажимает на флажок “AI-заключение готово и не требует исправлений”.

6.4. Рентгенолог нажимает кнопку «Подтвердить заключение».

6.5. Система фиксирует заключение как финальное.

7.Интеграция в цифровой архив пациента.

7.1. Система определяет пациента по идентификатору исследования.

7.2. Система добавляет снимок и итоговое заключение в историю пациента.

7.3. Система обновляет электронный архив PACS. 

#Альтернативный сценарий 1: Нет интернет соединения (LLM-сервис недоступен)

Точка отклонения от основного сценария:

После шага «Система отправляет рентгеновский снимок и текстовый запрос в LLM-сервис для анализа».

Шаги:

1.Система отправляет запрос на анализ, но не получает ответ от LLM-сервиса в установленные сроки (таймаут).

2.Система фиксирует ошибку уровня сети или недоступность удалённого сервиса.

3.Система отображает рентгенологу сообщение:

”Не удалось выполнить анализ. LLM-сервис временно недоступен. Попробуйте позже.”

4.Рентгенолог может выбрать:

4.1.Повторить отправку,

4.2.Оменить анализ,

4.3.Позвать администратора системы,

4.4.Провести анализ самостоятельно (без помощи AI).

5.Рентгенолог нажимает на кнопку “Провести анализ вручную”.

6.Система открывает форму ручного описания снимка:

6.1.Рентгенолог заполняет поле «Находки»,

6.2.Рентгенолог заполняет поле «Локализация»,

6.3.Рентгенолог заполняет поле «Заключение»,

6.4.Рентгенолог заполняет поле «Рекомендации».

7.Рентгенолог сохраняет медицинское заключение, нажав на кнопку “Сохранить”.

8.Система сохраняет вручную введённое описание как финальное заключение.

9.Система добавляет запись в локальный архив.

Результат альтернативного сценария: Система дала несколько вариантов для решения проблемы рентгенологу: повторить отправку снимка в LLM-сервис, отменить анализ или провести анализ самостоятельно.

#Альтернативный сценарий 2: Нет интернет соединения (Электронный архив PACS недоступен)

Точка отклонения от основного сценария:

После шага “Система определяет пациента по идентификатору исследования.”

Шаги:

1.Система обнаруживает отсутствие интернет-соединения.

2.Система отправляет данные в локальную SQLite базу.

3.Запись получает статус “Pending Sync” - “ожидает синхронизации”.

4.Система проверяет очередь локальных “незагруженных” заключений.

5.Когда интернет соединение восстанавливается, “незагруженные” исследования система отправляет по очереди в архив PACS.

Результат альтернативного сценария: Система сохранила медицинское заключение в локальной базе данных. После восстановления соединения с электронным архивом PACS система отправит исследование в глобальное хранилище.

#Альтернативный сценарий 3: Некорректный ввод или неверный формат снимка

Ошибка валидации входных данных

Точка отклонения:

После шага «Рентгенолог выбирает файл снимка пациента».

Шаги:

1.Рентгенолог выбирает файл, но система обнаруживает: неподдерживаемый формат (например PDF), повреждённый файл, некорректные метаданные.

2.Система блокирует дальнейший анализ.

3.Система выводит сообщение “Не удалось обработать файл. Выберите снимок в формате DICOM, PNG или JPG”.

4.Система предлагает повторно выбрать файл.

5.Рентгенолог загружает корректный снимок.

6.Процесс возвращается в основной Happy Path.

Результат альтернативного сценария: Обработка не начата, система предотвращает ошибочный анализ и позволяет загрузить правильный снимок.

#Ошибка 1: Технический сбой / Internal Server Error 

1.Лечащий врач запрашивает медицинское заключение по пациенту.

2.Система PACS не отправляет ответ на запрос.

3.Система отображает сообщение: "Произошла техническая ошибка. Повторите позже."

4.Лечащий врач может повторить операцию без потери сессии.

5.Лечащий врач просит администратора системы решить проблему.

#Ошибка 2: Некорректная аутентификация пользователя

1.Пользователь вводит неправильные данные своего аккаунта (логин, пароль).

2.Система уведомляет пользователя, что аккаунта с такими данными не найдено.

3.Пользователь исправляет ошибку и повторяет вход в систему.

#Ошибка 3: Превышение размера загружаемого файла

1.Пользователь загружает файл более 15МБ.

2.Система блокирует операцию.

3.Показывается сообщение: "Прикрепляемый файл не может быть более 15МБ. Попробуйте уменьшить размер изображения."
