# Разработка системы описания рентгеновских снимков с помощью LLM

## 1. Сегменты пользователей

### Радиологи и рентгенологи
Врачи, которые ежедневно анализируют рентгеновские снимки. Основные задачи: быстрое выявление патологии, составление точных заключений и документирование. Им важно снижение рутинной нагрузки, стандартизация отчетов и ускорение рабочего процесса.

### Врачи общей практики и клинические специалисты
Врачи, получающие рентгеновские снимки, но не являющиеся экспертами в визуальной диагностике. Им нужны понятные, структурированные и клинически полезные описания для принятия решений.

### Медицинские центры, клиники и телемедицинские сервисы
Организации, обрабатывающие большой поток снимков. Важны сокращение времени обработки, повышение качества и единообразие заключений, а также оптимизация затрат.

---

## 2. Pain Points

### Для врачей
- Высокая нагрузка из-за большого числа снимков.  
- Риск пропуска патологии из-за усталости.  
- Неоднородность формулировок между специалистами.  
- Время на составление текстового отчёта.

### Для клиник и телемедицины
- Недостаток профильных специалистов.  
- Задержки в выдаче заключений.  
- Высокая стоимость обработки больших объемов исследований.  
- Разное качество заключений между врачами.

---

## 3. Use-cases

### 1. Создание нового чата и получение описания снимка
**Цель:** быстро начать новый диалог, загрузить снимок и получить детализированное структурированное описание.  

**Описание:**  
Пользователь открывает главное меню и нажимает кнопку **New chat**. Создаётся пустой чат, в который можно сразу загрузить изображение. После загрузки фотография автоматически обрабатывается, и пользователь получает текстовое описание, включающее ключевые элементы композиции, объекты, контекст и возможные выводы модели. Можно дополнять запросы вопросами или уточнениями.  

**Пример:**  
New chat → загрузка снимка → ввод запроса → Send → получение подробного описания с разбивкой по смысловым блокам.

### 2. Поиск по существующим чатам
**Цель:** быстро найти нужный диалог среди множества ранее созданных чатов.  

**Описание:**  
Пользователь открывает поле глобального поиска, вводит ключевое слово или фразу — например, тему исследования или часть запроса. Список чатов автоматически фильтруется, показывая только те диалоги, в которых присутствует совпадение. Это позволяет эффективно ориентироваться в большом количестве материалов.  

**Пример:**  
Search → ввод ключевого слова → автоматическая фильтрация → выбор подходящего чата.

### 3. Поиск внутри чата
**Цель:** найти конкретный фрагмент текста или ответ модели в длинном диалоге.  

**Описание:**  
Внутри выбранного чата пользователь активирует строку поиска. После ввода термина система подсвечивает найденные совпадения и показывает контекст каждого совпавшего фрагмента. Пользователь может последовательно перемещаться между найденными строками и быстро находить нужный фрагмент даже в очень длинном диалоге.  

**Пример:**  
Search в чате → ввод ключевого слова → подсветка → переход к сообщению.

### 4. Добавление дополнительных изображений  
**Цель:** расширить анализ за счёт новых снимков или добавить альтернативные ракурсы для уточнения описания.  

**Описание:**  
Пользователь может прикреплять дополнительные изображения в текущий чат. Это удобно, если требуется сравнить несколько снимков, показать детали крупным планом или предоставить последовательность изображений. После загрузки модель обновляет описание, учитывая все представленные визуальные данные.  

**Пример:**  
Add image → загрузка нового снимка → получение обновлённого автоматического анализа.

### 5. Переименование и управление чатами  
**Цель:** структурировать рабочие материалы и легко ориентироваться среди большого количества диалогов.  

**Описание:**  
Пользователь может изменять название текущего чата с помощью компонента EditableTitle. Это полезно для систематизации проектов. Также можно выделить несколько чатов и удалить их через диалог подтверждения. Такие операции упрощают навигацию и поддерживают порядок.  

**Пример:**  
EditableTitle → Rename → Save → Delete → подтверждение удаления.

### 6. Открытие настроек и кастомизация поведения  
**Цель:** настроить интерфейс, поведение модели, параметры работы или визуальное оформление.  

**Описание:**  
Через кнопку **Settings** пользователь переходит в окно настроек, где можно изменить такие параметры, как оформление, горячие клавиши, режимы генерации ответов и другие опции. Возможно открыть настройки как в отдельном окне (Compact), так и в плавающем PopUp (Expanded), не покидая текущий чат.  

**Пример:**  
Settings → изменение параметров → сохранение настроек → возврат к чату.

### 7. Повторная отправка при возникновении ошибки
**Цель:** быстро восстановить диалог после сетевой ошибки или неудачного запроса.  

**Описание:**  
Если ответ от модели не был получен, интерфейс показывает кнопку восстановления (Retry). Нажав её, пользователь повторно отправляет последний запрос — вручную ничего вводить не требуется. Это особенно полезно при нестабильном интернете или при случайных сбоях.  

**Пример:**  
Ошибка → Retry → повторная отправка → успешный ответ.

### 8. Перетаскивание изображений (Drag & Drop)  
**Цель:** максимально ускорить процесс загрузки снимков при работе на ПК.  

**Описание:**  
В зоне чата работает обработчик перетаскивания файлов. Пользователь может просто перетащить изображение в окно чата, после чего оно автоматически прикрепится к сообщению. Такая механика ускоряет рабочий процесс и снижает количество необходимых действий.  

**Пример:**  
Drag & Drop изображения → автоматическое прикрепление → анализ снимка.

### 9. Работа с длинными диалогами (Scrolling & ReverseLayout)  
**Цель:** удобно просматривать большие чаты и быстро ориентироваться в истории сообщений.  

**Описание:**  
История сообщений отображается в режиме reverseLayout — новые сообщения находятся внизу. Пользователь может быстро прокручиваться к началу диалога, переходить между блоками, находить моменты, где прикреплялись изображения, и просматривать историю без визуальной задержки.  

**Пример:**  
Прокрутка вверх → поиск старого сообщения → просмотр контекста → продолжение диалога.

### 10. Редактирование названия чата и сохранение изменений  
**Цель:** уточнить контекст текущего проекта, не создавая новый чат.  

**Описание:**  
В режиме Expanded пользователь может изменить название чата прямо в верхней панели с помощью EditableTitle. Изменения сохраняются автоматически или по завершению ввода. Это позволяет при необходимости уточнить формулировку, не нарушая структуру проекта.  

**Пример:**  
Клик по названию → изменение → onEditingFinished → автоматическое сохранение.

### 11. Мультивыбор чатов и пакетное удаление  
**Цель:** быстро очистить рабочее пространство от ненужных диалогов.  

**Описание:**  
В компактном интерфейсе пользователь может удержать чат → включить режим выбора → отметить несколько чатов → удалить их одним нажатием. Для предотвращения ошибок появляется окно подтверждения.  

**Пример:**  
Long press → Select mode → выбор нескольких чатов → Delete → Confirm.

### 12. Отправка текстовых запросов без изображения  
**Цель:** использовать чат как стандартный текстовый интерфейс общения с моделью.  

**Описание:**  
Пользователь может отправлять текстовые сообщения без вложений. Это удобно, если требуется уточнить ответ, сформировать новый запрос, продолжить логическое рассуждение или воспользоваться моделью как справочным инструментом.  

**Пример:**  
Ввод текста → Send → получение ответа → уточнение.

---

## 4. Value Proposition

**Для врачей:** сокращение рутинной работы и повышение точности заключений.  
**Для клиник:** ускорение обработки снимков и единообразие отчетов.  
**Для пациентов:** быстрее и точнее диагностика, снижение риска ошибок.

---

## 5. North Star Metric

**Метрика:** доля автоматически сформированных описаний, принятых врачом без существенных правок (≤10%).  
**Цель:** высокая точность модели, снижение времени на обработку и экономия ресурсов клиники.
